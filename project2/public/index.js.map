{"version":3,"file":"index.js","mappings":"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","sources":["webpack://project2/./src/Controller/controller.js","webpack://project2/./src/Model/handleError.js","webpack://project2/./src/Model/state.js","webpack://project2/./src/View/webPage.js","webpack://project2/./src/services.js","webpack://project2/webpack/bootstrap","webpack://project2/webpack/runtime/define property getters","webpack://project2/webpack/runtime/hasOwnProperty shorthand","webpack://project2/webpack/runtime/make namespace object","webpack://project2/./src/Controller/appManager.js"],"sourcesContent":["import { fetchLogin, fetchLogout, fetchMessages, fetchPostMessage,fetchRegisteredUsers } from \"../services\";\r\nimport { renderMain, renderChatArea } from \"../View/webPage\";\r\nimport { showError } from '../Model/handleError';\r\nimport { loginPending } from \"../Model/state\";\r\n\r\nfunction processLogin(username, state, mainEl, chatEl) {\r\n    loginPending();\r\n    renderMain({ state, mainEl }); \r\n    fetchLogin(username)\r\n        .then(users => {\r\n            LoginSuccess(username, users, state, mainEl, chatEl);\r\n        })\r\n        .catch(err => {\r\n            LoginFailure(err, state, mainEl);\r\n        });\r\n}\r\n\r\nfunction LoginSuccess(username, users, state, mainEl, chatEl) {\r\n    state.isLoggedIn = true;\r\n    state.username = username;\r\n    state.error = \"\"; \r\n    state.users = users;\r\n    fetchMessages()\r\n        .then(messages => {\r\n            state.messages = messages;\r\n            fetchRegisteredUsers()\r\n                .catch(err => {\r\n                    showError(err.error);\r\n                });\r\n            renderMain({ state, mainEl });\r\n            renderChatArea({ state, chatEl });\r\n        })\r\n        .catch(err => {\r\n             state.isLoginPending = false;\r\n            showError(err.error);\r\n            renderMain({ state, mainEl }); \r\n        });\r\n}\r\n\r\nfunction LoginFailure(err, state, mainEl) {\r\n    state.isLoginPending = false;\r\n    state.isLoggedIn = false;\r\n    state.username = \"\";\r\n    showError(err.error);\r\n    renderMain({ state, mainEl });\r\n}\r\n\r\nfunction performLogout(state, mainEl, chatEl) {\r\n    state.isLoggedIn = false;\r\n    state.username = \"\";\r\n    state.error = \"\";\r\n    state.isLoginPending = false;\r\n    renderMain({ state, mainEl });\r\n    renderChatArea({ state, chatEl });\r\n\r\n    fetchLogout()\r\n        .then(() => {\r\n            renderMain({ state, mainEl });\r\n        })\r\n        .catch((err) => {\r\n            showError(err.error);\r\n            renderMain({ state, mainEl });\r\n        });\r\n}\r\n\r\nfunction sendAndDisplayMessage(message, state, mainEl, chatEl) {\r\n    state.error = \"\";\r\n    renderChatArea({ state, chatEl }); \r\n    fetchPostMessage(message)\r\n        .then((messages) => {\r\n            state.messages = messages;\r\n            renderMain({ state, mainEl });\r\n            renderChatArea({ state, chatEl });\r\n        })\r\n        .catch((err) => {\r\n            showError(err.error);\r\n            renderMain({ state, mainEl });\r\n        });\r\n}\r\n\r\nexport function listenerControl({ state, mainEl, chatEl }) {\r\n    mainEl.addEventListener(\"submit\", (e) => {\r\n        e.preventDefault();\r\n        const target = e.target;\r\n        if (target.classList.contains(\"login-form\")) {\r\n            const username = mainEl.querySelector(\".login-username\").value.trim();\r\n            loginPending();\r\n            processLogin(username, state, mainEl, chatEl);\r\n        } else if (target.classList.contains(\"UserLogout\")) {\r\n            performLogout(state, mainEl, chatEl);\r\n        } else if (target.classList.contains(\"chatSending\")) {\r\n            const message = mainEl.querySelector(\".message\").value.trim();\r\n            if (message) {\r\n                sendAndDisplayMessage(message, state, mainEl, chatEl);\r\n            } else {\r\n                showError('required message');\r\n                renderMain({ state, mainEl });\r\n            }\r\n        }\r\n    });\r\n}\r\n","import { state } from './state.js';\r\nexport function showError(errorType) {\r\n    if (!errorType) {\r\n        state.error = '';\r\n        return;\r\n    }\r\n    let errorMessage = 'An unexpected error occurred!'; \r\n    if (errorType === 'network error') {\r\n        errorMessage = 'There is a network error';\r\n    } else if (errorType === 'auth insufficient') {\r\n        errorMessage = 'You cannot use dog as a username.';\r\n    } else if (errorType === 'required username') {\r\n        errorMessage = 'Please enter a valid username';\r\n    } else if (errorType === 'required message') {\r\n        errorMessage = 'Please enter something to send';\r\n    }\r\n\r\n    state.error = errorMessage;\r\n    state.isLoginPending = false;\r\n  \r\n}\r\n","export const state = {\r\n    isLoggedIn: false,\r\n    username: \"\",\r\n    error: \"\",\r\n    users: {},\r\n    messages: [],\r\n    registeredUsers: [],\r\n    isLoginPending: false,\r\n};\r\n\r\nexport function loginPending() {\r\n    state.isLoggedIn = false;\r\n    state.isLoginPending = true;\r\n    state.username = '';\r\n    state.users = {};\r\n    state.messages = [];\r\n    state.error = '';\r\n}\r\n","export function renderMain({ state, mainEl }) {\r\n    const html = `\r\n        ${logginSite(state)}\r\n        ${userSendMessageOrLogout(state)}\r\n     \r\n    `;\r\n    mainEl.innerHTML = html;\r\n}\r\n\r\n\r\nfunction logginSite (state) {\r\n    const displayError=state.error ? `<div class=\"error\">${state.error}</div>` : \"\";\r\n    if (state.isLoggedIn) {\r\n        return ``;\r\n    }\r\n    return `\r\n        ${getLoginHtml(state)}\r\n        <div class=\"header\">\r\n            <h1>Please login to start our channel!</h1>  \r\n        </div>\r\n        <div class=\"login\">\r\n            <form class=\"login-form\">\r\n                <label for=\"username\">Enter your username:</label>\r\n                <input type=\"text\" id=\"username\" class=\"login-username\" name=\"username\" placeholder=\"Type your username here\">\r\n                <div class=\"error\">${displayError}</div>\r\n                <button class=\"login-button\">Submit</button>\r\n            </form>\r\n        </div>\r\n\r\n    `;\r\n}\r\n\r\nfunction showUserWelcomeMessage(state) {\r\n    if (!state.isLoggedIn) {\r\n        return \"\";\r\n    }\r\n    return `\r\n        <div class=\"header\">\r\n            <h1>Welcome to the chatting channel, ${state.username}!</h1>\r\n        </div>\r\n    `;\r\n}\r\n\r\n\r\nexport function renderChatArea({ state, chatEl }) {\r\n    let html = ``; \r\n\r\n    if (state.isLoggedIn) {\r\n        html = `\r\n            ${showChatAndUsers(state)}\r\n        `;\r\n    }\r\n\r\n    chatEl.innerHTML = html;\r\n}\r\n\r\nfunction userSendMessageOrLogout(state) {\r\n    if (!state.isLoggedIn) {\r\n        return ``; \r\n    }\r\n    \r\n    const displayError = state.error ? `<div class=\"error\">${state.error}</div>` : \"\";\r\n    return `\r\n        <div class=\"sendMessageOrLogout\">\r\n            <div class=\"sendMessage\">\r\n                <form class=\"chatSending\">\r\n                    <label for=\"messageInput\">Type your new message here:</label>\r\n                    <input type=\"text\" id=\"messageInput\" class=\"message\" name=\"message\" placeholder=\"Type your new message here\">\r\n                    <button class=\"send-button\">Send</button>\r\n                    ${displayError}\r\n                </form>\r\n    </div>\r\n    \r\n            <div class=\"logout\">\r\n                <form class=\"UserLogout\">\r\n                    <button class=\"logout-button\">Logout</button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    `;\r\n}\r\n\r\nfunction showAllMessages(state) {\r\n    if (!state.isLoggedIn || !state.messages) {\r\n        return \"\";\r\n    }\r\n\r\n    let messagesHtml = '<ol class=\"messages\">';\r\n    \r\n    for (let i = 0; i < state.messages.length; i++) {\r\n        messagesHtml += `\r\n            <li>\r\n                <div class=\"message\">\r\n                    <span class=\"username\">${state.messages[i].sender}</span>\r\n                    <p class=\"messageText\">${state.messages[i].text}</p>\r\n                </div>\r\n            </li>\r\n        `;\r\n    }\r\n\r\n    messagesHtml += '</ol>';\r\n    return messagesHtml;\r\n}\r\n\r\nfunction showChatAndUsers(state) {\r\n    const messagesHtml = showAllMessages(state);\r\n    const usersHtml = showUserWelcomeMessage(state);\r\n    const onlineUsersHtml = Object.keys(state.users).map(user => `<li>${user}</li>`).join('');\r\n    const chattingSession = `\r\n        <div class=\"online-users\">\r\n            <h2>Online Users</h2>\r\n            <ul>${onlineUsersHtml}</ul>\r\n        </div>\r\n        <div class=\"chat-container\">\r\n            ${usersHtml}\r\n            ${messagesHtml}\r\n        </div>\r\n    `;\r\n\r\n    return chattingSession;\r\n}\r\n\r\nfunction getLoginHtml(state) {\r\n    if(state.isLoginPending) {\r\n      return `\r\n        <div class=\"loadingMessage\">Loading user...</div>\r\n      `\r\n    }\r\n    return '';\r\n  }","export function fetchSession() {\r\n\treturn fetch(\"/api/session\", {\r\n\t\tmethod: \"GET\",\r\n\t})\r\n    .catch((err) => Promise.reject({ error: \"network error\" }))\r\n    .then((response) => {\r\n        if (!response.ok) {\r\n            return response.json().then((err) => Promise.reject(err));\r\n        }\r\n        return response.json();\r\n    });\r\n}\r\n\r\nexport function fetchLogin(username) {\r\n\treturn fetch(\"/api/session\", {\r\n\t\tmethod: \"POST\",\r\n\t\theaders:({\r\n\t\t\t\"content-type\": \"application/json\",\r\n\t\t}),\r\n\t\tbody: JSON.stringify({ username }),\r\n\t})\r\n\t.catch((err) => Promise.reject({ error: \"network error\" }))\r\n\t\t.then((response) => {\r\n\t\t\tif (!response.ok) {\r\n\t\t\t\treturn response.json().then((err) => Promise.reject(err));\r\n\t\t\t}\r\n\t\t\treturn response.json();\r\n\t\t});\r\n}\r\n\r\nexport function fetchLogout() {\r\n\treturn fetch(\"/api/session\", {\r\n\t\tmethod: \"DELETE\",\r\n\t})\r\n\t\t.catch((err) => Promise.reject({ error: \"network error\" }))\r\n\t\t.then((response) => {\r\n\t\t\tif (!response.ok) {\r\n\t\t\t\treturn response.json().then((err) => Promise.reject(err));\r\n\t\t\t}\r\n\t\t\treturn response.json();\r\n\t\t});\r\n}\r\n\r\nexport function fetchLoginUsers() {\r\n    return fetch(\"/api/onlineUsers\", {\r\n        method: \"GET\",\r\n    })\r\n    .catch((err) => Promise.reject({ error: \"network error\" }))\r\n    .then((response) => {\r\n        if (!response.ok) {\r\n            return response.json().then((err) => Promise.reject(err));\r\n        }\r\n        return response.json();\r\n    });\r\n}\r\n\r\nexport function fetchRegisteredUsers() {\r\n    return fetch(\"/api/existUsers\", {\r\n        method: \"GET\",\r\n    })\r\n    .catch((err) => Promise.reject({ error: \"network error\" }))\r\n    .then((response) => {\r\n        if (!response.ok) {\r\n            return response.json().then((err) => Promise.reject(err));\r\n        }\r\n        return response.json();\r\n    });\r\n}\r\n\r\n\r\n\r\nexport function fetchMessages() {\r\n\treturn fetch(\"/api/messages\", {\r\n\t\tmethod: \"GET\",\r\n\t})\r\n    .catch((err) => Promise.reject({ error: \"network error\" }))\r\n    .then((response) => {\r\n        if (!response.ok) {\r\n            return response.json().then((err) => Promise.reject(err));\r\n        }\r\n        return response.json();\r\n    });\r\n}\r\n\r\nexport function fetchPostMessage(message) {\r\n\treturn fetch(\"/api/messages\", {\r\n\t\tmethod: \"POST\",\r\n\t\theaders: {\r\n\t\t\t\"content-type\": \"application/json\",\r\n\t\t},\r\n\t\tbody: JSON.stringify({ message }),\r\n\t})\r\n\t\t.catch((err) => Promise.reject({ error: \"network error\" }))\r\n\t\t.then((response) => {\r\n\t\t\tif (!response.ok) {\r\n\t\t\t\treturn response.json().then((err) => Promise.reject(err));\r\n\t\t\t}\r\n\t\t\treturn response.json();\r\n\t\t});\r\n}\r\n\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { renderChatArea, renderMain } from \"../View/webPage\";\r\nimport { showError } from '../Model/handleError';\r\nimport { listenerControl } from \"./controller\";\r\nimport { fetchSession, fetchLoginUsers, fetchMessages } from \"../services\";\r\nimport { state, loginPending } from \"../Model/state\";\r\n\r\nconst mainEl = document.querySelector(\"#mainArea\");\r\nconst chatEl = document.querySelector(\"#chatArea\");\r\n\r\nrenderMain({ state, mainEl });\r\nrenderChatArea({ state, chatEl });\r\nlistenerControl({ state, mainEl, chatEl });\r\n\r\ncheckLoginStatus();\r\ninitialRender();\r\n\r\nfunction checkLoginStatus() {\r\n    loginPending()\r\n    renderMain({ state, mainEl });\r\n    fetchSession()\r\n        .then((session) => {\r\n            state.isLoggedIn = true;\r\n            state.username = session.username;\r\n            state.error = \"\";\r\n            state.isLoginPending = false; \r\n            renderMain({ state, mainEl });\r\n            updateChats();\r\n        })\r\n        .catch((err) => {\r\n            state.isLoginPending = false; \r\n            if (err && err.error === 'auth missing') {\r\n                state.isLoggedIn = false;\r\n                state.username = \"\";\r\n                state.error = \"\";\r\n                \r\n                renderMain({ state, mainEl });\r\n            } else {\r\n                showError(err && err.error); \r\n                renderMain({ state, mainEl });\r\n            }\r\n        });\r\n}\r\n\r\nfunction initialRender() {\r\n    updateChats();\r\n    setTimeout(initialRender, 5000); \r\n}\r\n\r\nfunction updateChats() {\r\n    if (!state.isLoggedIn) {\r\n        return; \r\n    }\r\n    fetchLoginUsers()\r\n        .then((users) => {\r\n            state.users = users\r\n            return fetchMessages();\r\n        })\r\n        .then((messages) => {\r\n            state.messages = messages;\r\n            renderChatArea({ state, chatEl });\r\n        })\r\n        .catch((err) => {\r\n\r\n            showError(err.error);\r\n            renderMain({ state, mainEl });\r\n        });\r\n}\r\n\r\n"],"names":["fetchLogin","fetchLogout","fetchMessages","fetchPostMessage","fetchRegisteredUsers","renderMain","renderChatArea","showError","loginPending","processLogin","username","state","mainEl","chatEl","then","users","LoginSuccess","err","LoginFailure","isLoggedIn","error","messages","isLoginPending","performLogout","sendAndDisplayMessage","message","listenerControl","_ref","addEventListener","e","preventDefault","target","classList","contains","querySelector","value","trim","errorType","errorMessage","registeredUsers","html","concat","logginSite","userSendMessageOrLogout","innerHTML","displayError","getLoginHtml","showUserWelcomeMessage","_ref2","showChatAndUsers","showAllMessages","messagesHtml","i","length","sender","text","usersHtml","onlineUsersHtml","Object","keys","map","user","join","chattingSession","fetchSession","fetch","method","Promise","reject","response","ok","json","headers","body","JSON","stringify","fetchLoginUsers","document","checkLoginStatus","initialRender","session","updateChats","setTimeout"],"sourceRoot":""}